<!--
FastAPI에서 백엔드를 띄우면, HTML 웹페이지와 같은 정보성 static 파일은 app.mount로 지정한 디렉터리에서 제공
HTML 파일 안에서 상대 경로(/stt-tts/)를 사용하면, 브라우저는 현재 문서를 내려준 서버(base URL)의 포트·도메인을 기준으로 해당 API를 호출
-->
<script>
(async () => {
  try {
    const res = await fetch("http://localhost:8080/api/auth/check", {
      method: "GET",
      credentials: "include",
    });

    if (!res.ok) {
      // 로그인 안 됨 → 로그인 페이지로
      window.location.href = "http://localhost:8080/login";
      return;
    }
  } catch (e) {
    // 인증 서버 접근 실패도 로그인으로
    window.location.href = "http://localhost:8080/login";
  }
})();
</script>

<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Voice Demo Hub</title>
  <style>
    :root {
      --bg: #f3f4f6;
      --card-bg: #ffffff;
      --text-main: #111827;
      --text-muted: #6b7280;
      --primary: #2563eb;
      --primary-soft: #e0ecff;
      --border-subtle: #e5e7eb;
      --radius-lg: 16px;
    }

    * {
      box-sizing: border-box;
    }

    body {
      margin: 0;
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", system-ui,
        sans-serif;
      background: radial-gradient(circle at top, #e0edff 0, var(--bg) 45%);
      color: var(--text-main);
    }

    .page {
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 32px 16px;
    }

    .shell {
      width: 100%;
      max-width: 1080px;
      background: var(--card-bg);
      border-radius: 24px;
      box-shadow: 0 24px 60px rgba(15, 23, 42, 0.12);
      padding: 32px 28px 28px;
    }

    header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 16px;
      margin-bottom: 24px;
      border-bottom: 1px solid var(--border-subtle);
      padding-bottom: 16px;
    }

    .brand {
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .brand-icon {
      width: 32px;
      height: 32px;
      border-radius: 12px;
      background: linear-gradient(135deg, #2563eb, #4f46e5);
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
      font-size: 18px;
      font-weight: 700;
    }

    .brand-title {
      font-weight: 650;
      letter-spacing: 0.03em;
      font-size: 18px;
    }

    nav {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      font-size: 14px;
    }

    nav a {
      text-decoration: none;
      color: var(--text-muted);
      padding: 6px 12px;
      border-radius: 999px;
      border: 1px solid transparent;
    }

    nav a:hover {
      background: var(--primary-soft);
      color: var(--primary);
      border-color: #bfd4ff;
    }

    nav a.active {
      background: var(--primary);
      color: white;
    }

    main {
      margin-top: 4px;
    }

    .hero-title {
      font-size: 28px;
      font-weight: 700;
      margin: 4px 0 6px;
    }

    .hero-sub {
      font-size: 14px;
      color: var(--text-muted);
      max-width: 540px;
    }

    .grid {
      margin-top: 24px;
      display: grid;
      grid-template-columns: repeat(3, minmax(0, 1fr));
      gap: 16px;
    }

    .card {
      border-radius: var(--radius-lg);
      border: 1px solid var(--border-subtle);
      padding: 18px 16px 18px;
      background: #f9fafb;
      display: flex;
      flex-direction: column;
      justify-content: space-between;
      transition: transform 0.12s ease, box-shadow 0.12s ease,
        border-color 0.12s ease, background 0.12s ease;
    }

    .card:hover {
      transform: translateY(-3px);
      box-shadow: 0 18px 35px rgba(15, 23, 42, 0.12);
      border-color: #cbd5f5;
      background: #ffffff;
    }

    .card-label {
      font-size: 11px;
      text-transform: uppercase;
      letter-spacing: 0.14em;
      color: var(--primary);
      margin-bottom: 6px;
      font-weight: 600;
    }

    .card-title {
      font-size: 18px;
      font-weight: 600;
      margin-bottom: 4px;
    }

    .card-desc {
      font-size: 13px;
      color: var(--text-muted);
      margin-bottom: 14px;
      min-height: 44px;
    }

    .tag-row {
      display: flex;
      flex-wrap: wrap;
      gap: 4px;
      margin-bottom: 10px;
    }

    .tag {
      font-size: 11px;
      padding: 2px 8px;
      border-radius: 999px;
      background: #eff3ff;
      color: #374151;
    }

    .btn {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 6px;
      padding: 8px 14px;
      border-radius: 999px;
      border: none;
      cursor: pointer;
      font-size: 13px;
      font-weight: 500;
      background: var(--primary);
      color: white;
      text-decoration: none;
      margin-top: 4px;
    }

    .btn span {
      font-size: 14px;
    }

    .btn:hover {
      background: #1e4fd4;
    }

    footer {
      margin-top: 22px;
      font-size: 11px;
      color: var(--text-muted);
      display: flex;
      justify-content: space-between;
      gap: 10px;
      flex-wrap: wrap;
    }

    @media (max-width: 900px) {
      .grid {
        grid-template-columns: 1fr;
      }
    }

    @media (max-width: 640px) {
      .shell {
        border-radius: 18px;
        padding: 20px 18px 18px;
      }

      header {
        flex-direction: column;
        align-items: flex-start;
      }

      .hero-title {
        font-size: 22px;
      }
    }
  </style>
</head>
<body>
  <div class="page">
    <div class="shell">
      <header>
        <div class="brand">
          <div class="brand-icon">V</div>
          <div>
            <div class="brand-title">Voice Demo Hub</div>
            <div style="font-size:12px;color:var(--text-muted);">
              STT · TTS · STT→GPT→TTS 샘플 모음
            </div>
          </div>
        </div>
        <nav>
          <a href="index.html" class="active">홈</a>
          <a href="stt.html">STT</a>
          <a href="tts.html">TTS</a>
          <a href="stt-tts.html">STT→GPT→TTS</a>
        </nav>
      </header>

      <main>
        <h1 class="hero-title">순수 Java 기반 웹서버 구축과 Physical AI 연동 데모</h1>
        <!-- 데모 요약 4꼭지 -->
        <ul class="hero-summary">
          <li>순수 Java 기반 웹 서버 + JWT 발급</li>
          <li>DBMS 연동 회원가입 / 로그인 기능</li>
          <li>AI 백엔드와 인증 연동 (STT / TTS / LLM)</li>
          <li>2개의 서버 (프론트엔드 / 백엔드)가 분리된 MSA 구조</li>
        </ul>
        <p class="hero-sub">
          브라우저에서 바로 음성을 녹음하고, 텍스트로 변환하거나 다시 음성으로
          재생하는 흐름을 실험해볼 수 있는 페이지입니다. 각 데모는 독립적으로
          동작하며 같은 인증 토큰(JWT)을 재사용합니다.
        </p>

        <div class="grid">
          <section class="card">
            <div>
              <div class="card-label">모노 서비스</div>
              <h2 class="card-title">Whisper STT</h2>
              <p class="card-desc">
                마이크로 음성을 녹음해서 Whisper STT 백엔드로 전송하고,
                인식된 텍스트를 화면에 표시합니다.
              </p>
              <div class="tag-row">
                <span class="tag">마이크 입력</span>
                <span class="tag">단일 STT</span>
                <span class="tag">JSON 응답</span>
              </div>
            </div>
            <a class="btn" href="stt.html">
              <span>STT 데모 열기</span> →
            </a>
          </section>

          <section class="card">
            <div>
              <div class="card-label">모노 서비스</div>
              <h2 class="card-title">Text-to-Speech (TTS)</h2>
              <p class="card-desc">
                입력한 텍스트를 OpenAI TTS 백엔드로 보내고, 생성된 MP3를
                브라우저에서 바로 재생합니다.
              </p>
              <div class="tag-row">
                <span class="tag">텍스트 입력</span>
                <span class="tag">MP3 출력</span>
                <span class="tag">파일 스트리밍</span>
              </div>
            </div>
            <a class="btn" href="tts.html">
              <span>TTS 데모 열기</span> →
            </a>
          </section>

          <section class="card">
            <div>
              <div class="card-label">파이프라인</div>
              <h2 class="card-title">STT → GPT → TTS</h2>
              <p class="card-desc">
                한 번의 녹음으로 STT 변환, GPT 응답 생성, TTS 음성 합성을
                순차적으로 수행하는 전체 파이프라인입니다.
              </p>
              <div class="tag-row">
                <span class="tag">End-to-end</span>
                <span class="tag">대화 흐름</span>
                <span class="tag">음성 응답</span>
              </div>
            </div>
            <a class="btn" href="stt-tts.html">
              <span>파이프라인 데모</span> →
            </a>
          </section>
        </div>

        <footer>
          <span>브라우저에서 마이크 사용 권한을 허용해야 STT 관련 데모가 정상 동작합니다.</span>
          <span>각 페이지는 백엔드 엔드포인트 <code>/stt/</code>,
            <code>/tts/</code>, <code>/stt-tts/</code>와 연결됩니다.</span>
        </footer>
      </main>
    </div>
  </div>
</body>
</html>