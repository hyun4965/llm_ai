<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <title>TTS Demo</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <style>
    :root {
      --bg: #f3f4f6;
      --card-bg: #ffffff;
      --text-main: #111827;
      --text-muted: #6b7280;
      --primary: #2563eb;
      --primary-soft: #e0ecff;
      --border-subtle: #e5e7eb;
    }

    * {
      box-sizing: border-box;
    }

    body {
      margin: 0;
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", system-ui,
        sans-serif;
      background: radial-gradient(circle at top, #e0edff 0, var(--bg) 45%);
      color: var(--text-main);
    }

    .page {
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 32px 16px;
    }

    .card {
      width: 100%;
      max-width: 720px;
      background: var(--card-bg);
      border-radius: 20px;
      box-shadow: 0 22px 50px rgba(15, 23, 42, 0.12);
      padding: 24px 22px 22px;
      border: 1px solid var(--border-subtle);
    }

    header {
      display: flex;
      justify-content: space-between;
      gap: 12px;
      align-items: center;
      margin-bottom: 16px;
    }

    .title {
      font-size: 22px;
      font-weight: 700;
    }

    .subtitle {
      font-size: 13px;
      color: var(--text-muted);
      margin-top: 4px;
    }

    nav {
      display: flex;
      flex-wrap: wrap;
      gap: 6px;
      font-size: 12px;
    }

    nav a {
      text-decoration: none;
      color: var(--text-muted);
      padding: 4px 10px;
      border-radius: 999px;
      border: 1px solid transparent;
    }

    nav a:hover {
      background: var(--primary-soft);
      color: var(--primary);
      border-color: #bfd4ff;
    }

    nav a.active {
      background: var(--primary);
      color: white;
    }

    textarea {
      width: 100%;
      min-height: 110px;
      resize: vertical;
      padding: 10px 12px;
      border-radius: 12px;
      border: 1px solid var(--border-subtle);
      font-size: 14px;
      font-family: inherit;
      margin-top: 6px;
    }

    textarea:focus {
      outline: none;
      border-color: var(--primary);
      box-shadow: 0 0 0 1px var(--primary-soft);
    }

    .btn {
      margin-top: 14px;
      padding: 9px 18px;
      border-radius: 999px;
      border: none;
      background: var(--primary);
      color: white;
      font-size: 14px;
      font-weight: 500;
      cursor: pointer;
    }

    .btn:hover {
      background: #1e4fd4;
    }

    .audio-wrapper {
      margin-top: 18px;
      display: none;
    }

    audio {
      width: 100%;
    }

    .status {
      margin-top: 10px;
      font-size: 12px;
      color: var(--text-muted);
    }

    footer {
      margin-top: 16px;
      font-size: 11px;
      color: var(--text-muted);
    }

    @media (max-width: 640px) {
      .card {
        padding: 18px 16px 16px;
      }

      header {
        flex-direction: column;
        align-items: flex-start;
      }

      .title {
        font-size: 18px;
      }
    }
  </style>
</head>
<body>
  <div class="page">
    <div class="card">
      <header>
        <div>
          <div class="title">ğŸ”Š Text-to-Speech (TTS) Demo</div>
          <div class="subtitle">
            í…ìŠ¤íŠ¸ë¥¼ ì…ë ¥í•˜ê³  <code>/tts/</code> ì—”ë“œí¬ì¸íŠ¸ë¥¼ í˜¸ì¶œí•˜ì—¬ ìƒì„±ëœ
            ìŒì„±ì„ ì¬ìƒí•©ë‹ˆë‹¤.
          </div>
        </div>
        <nav>
          <a href="index.html">í™ˆ</a>
          <a href="stt.html">STT</a>
          <a href="tts.html" class="active">TTS</a>
          <a href="stt-tts.html">STTâ†’GPTâ†’TTS</a>
        </nav>
      </header>

      <main>
        <label for="text-input" style="font-size:13px;font-weight:500;">
          í…ìŠ¤íŠ¸ ì…ë ¥
        </label>
        <textarea
          id="text-input"
          placeholder="ì—¬ê¸°ì— ìŒì„±ìœ¼ë¡œ ë³€í™˜í•  í…ìŠ¤íŠ¸ë¥¼ ì…ë ¥í•˜ì„¸ìš”..."
        ></textarea>

        <button id="generate-tts" class="btn">TTS ìƒì„±</button>

        <div id="status" class="status">
          í…ìŠ¤íŠ¸ë¥¼ ì…ë ¥í•œ ë’¤ ë²„íŠ¼ì„ ëˆ„ë¥´ë©´ ìŒì„±ì´ ìƒì„±ë©ë‹ˆë‹¤.
        </div>

        <div class="audio-wrapper" id="audio-wrapper">
          <audio id="audio-player" controls></audio>
        </div>
      </main>

      <footer>
        ì‘ë‹µ JSONì˜ <code>file_path</code> ê²½ë¡œë¥¼ ì‚¬ìš©í•´ ì˜¤ë””ì˜¤ë¥¼ ì¬ìƒí•˜ë©°, ìºì‹œ
        ë¬´íš¨í™”ë¥¼ ìœ„í•´ ì¿¼ë¦¬ íŒŒë¼ë¯¸í„°ë¡œ timestampë¥¼ í•¨ê»˜ ì¶”ê°€í•©ë‹ˆë‹¤.
      </footer>
    </div>
  </div>

  <script>
    const btn = document.getElementById("generate-tts");
    const textInput = document.getElementById("text-input");
    const audioWrapper = document.getElementById("audio-wrapper");
    const audioPlayer = document.getElementById("audio-player");
    const statusEl = document.getElementById("status");

    btn.addEventListener("click", async () => {
      const text = textInput.value;

      if (!text.trim()) {
        alert("í…ìŠ¤íŠ¸ë¥¼ ì…ë ¥í•˜ì„¸ìš”!");
        return;
      }

      statusEl.textContent = "TTS ìƒì„± ì¤‘ì…ë‹ˆë‹¤...";
      btn.disabled = true;

      try {
        const response = await fetch("/tts/", {
          method: "POST",
          headers: {
            "Content-Type": "application/x-www-form-urlencoded",
          },
          body: new URLSearchParams({ text }),
        });

        if (!response.ok) {
          let error;
          try {
            error = await response.json();
          } catch {
            error = { detail: "ì•Œ ìˆ˜ ì—†ëŠ” ì˜¤ë¥˜" };
          }
          alert(`TTS ìƒì„± ì‹¤íŒ¨: ${error.detail}`);
          statusEl.textContent = "TTS ìƒì„±ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.";
          return;
        }

        const data = await response.json();
        audioPlayer.src = data.file_path + "?v=" + new Date().getTime();
        audioWrapper.style.display = "block";
        audioPlayer.play();
        statusEl.textContent = "TTSê°€ ìƒì„±ë˜ì—ˆìŠµë‹ˆë‹¤. ì•„ë˜ í”Œë ˆì´ì–´ë¡œ ì¬ìƒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.";
      } catch (error) {
        console.error("ì—ëŸ¬ ë°œìƒ:", error);
        alert("TTS ìš”ì²­ ì¤‘ ë¬¸ì œê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.");
        statusEl.textContent = "TTS ìš”ì²­ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.";
      } finally {
        btn.disabled = false;
      }
    });
  </script>
</body>
</html>